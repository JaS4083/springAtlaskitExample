function t(t){t.preventDefault(),t.returnValue=""}function e(){let t=[];return{get length(){return t.length},push:e=>(t.push(e),function(){t=t.filter(t=>t!==e)}),call(e){t.forEach(t=>t&&t(e))}}}function n(){return Math.random().toString(36).substr(2,8)}function l({pathname:t="/",search:e="",hash:n=""}){return t+e+n}function a(t){let e={};if(t){var n=t.indexOf("#");0<=n&&(e.hash=t.substr(n),t=t.substr(0,n)),0<=(n=t.indexOf("?"))&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function r({window:r=document.defaultView}={}){function i(){let{pathname:t,search:e,hash:n}=r.location,l=f.state||{};return[l.idx,{pathname:t,search:e,hash:n,state:l.usr||null,key:l.key||"default"}]}function o(t){return"string"==typeof t?t:l(t)}function u(t,e=null){return{...d,..."string"==typeof t?a(t):t,state:e,key:n()}}function c(t){p=t,[g,d]=i(),P.call({action:p,location:d})}function s(t){f.go(t)}let f=r.history,h=null;r.addEventListener("popstate",(function(){if(h)y.call(h),h=null;else{let[t,e]=i();if(y.length){if(null!=t){let n=g-t;n&&(h={action:"POP",location:e,retry(){s(-1*n)}},s(n))}}else c("POP")}}));let p="POP",[g,d]=i(),y=e(),P=e();return null==g&&(g=0,f.replaceState({...f.state,idx:g},null)),{get action(){return p},get location(){return d},createHref:o,push:function t(e,n){let l=u(e,n);if(!y.length||(y.call({action:"PUSH",location:l,retry:function(){t(e,n)}}),0)){let[t,e]=[{usr:l.state,key:l.key,idx:g+1},o(l)];try{f.pushState(t,null,e)}catch(a){r.location.assign(e)}c("PUSH")}},replace:function t(e,n){let l=u(e,n);if(!y.length||(y.call({action:"REPLACE",location:l,retry:function(){t(e,n)}}),0)){let[t,e]=[{usr:l.state,key:l.key,idx:g},o(l)];f.replaceState(t,null,e),c("REPLACE")}},go:s,back(){s(-1)},forward(){s(1)},listen:t=>P.push(t),block(e){let n=y.push(e);return 1===y.length&&r.addEventListener("beforeunload",t),function(){n(),y.length||r.removeEventListener("beforeunload",t)}}}}function i({window:r=document.defaultView}={}){function i(){let{pathname:t="/",search:e="",hash:n=""}=a(r.location.hash.substr(1)),l=h.state||{};return[l.idx,{pathname:t,search:e,hash:n,state:l.usr||null,key:l.key||"default"}]}function o(){if(p)P.call(p),p=null;else{let[t,e]=i();if(P.length){if(null!=t){let n=d-t;n&&(p={action:"POP",location:e,retry(){f(-1*n)}},f(n))}}else s("POP")}}function u(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=-1===(n=(e=r.location.href).indexOf("#"))?e:e.slice(0,n)),(e=n)+"#"+("string"==typeof t?t:l(t))}function c(t,e=null){return{...y,..."string"==typeof t?a(t):t,state:e,key:n()}}function s(t){g=t,[d,y]=i(),k.call({action:g,location:y})}function f(t){h.go(t)}let h=r.history,p=null;r.addEventListener("popstate",o),r.addEventListener("hashchange",()=>{let[,t]=i();l(t)!==l(y)&&o()});let g="POP",[d,y]=i(),P=e(),k=e();return null==d&&(d=0,h.replaceState({...h.state,idx:d},null)),{get action(){return g},get location(){return y},createHref:u,push:function t(e,n){let l=c(e,n);if(!P.length||(P.call({action:"PUSH",location:l,retry:function(){t(e,n)}}),0)){let[t,e]=[{usr:l.state,key:l.key,idx:d+1},u(l)];try{h.pushState(t,null,e)}catch(a){r.location.assign(e)}s("PUSH")}},replace:function t(e,n){let l=c(e,n);if(!P.length||(P.call({action:"REPLACE",location:l,retry:function(){t(e,n)}}),0)){let[t,e]=[{usr:l.state,key:l.key,idx:d},u(l)];h.replaceState(t,null,e),s("REPLACE")}},go:f,back(){f(-1)},forward(){f(1)},listen:t=>k.push(t),block(e){let n=P.push(e);return 1===P.length&&r.addEventListener("beforeunload",t),function(){n(),P.length||r.removeEventListener("beforeunload",t)}}}}function o({initialEntries:t=["/"],initialIndex:r=0}={}){function i(t,e=null){return{...p,..."string"==typeof t?a(t):t,state:e,key:n()}}function o(t,e,n){return!g.length||(g.call({action:t,location:e,retry:n}),!1)}function u(t,e){h=t,p=e,d.call({action:h,location:p})}function c(t){let e=Math.min(Math.max(f+t,0),s.length-1),n=s[e];o("POP",n,(function(){c(t)}))&&(f=e,u("POP",n))}let s=t.map(t=>({pathname:"/",search:"",hash:"",state:null,key:n(),..."string"==typeof t?a(t):t})),f=Math.min(Math.max(r,0),s.length-1),h="POP",p=s[f],g=e(),d=e();return{get index(){return f},get action(){return h},get location(){return p},createHref:function(t){return"string"==typeof t?t:l(t)},push:function t(e,n){let l=i(e,n);o("PUSH",l,(function(){t(e,n)}))&&(f+=1,s.splice(f,s.length,l),u("PUSH",l))},replace:function t(e,n){let l=i(e,n);o("REPLACE",l,(function(){t(e,n)}))&&(s[f]=l,u("REPLACE",l))},go:c,back(){c(-1)},forward(){c(1)},listen:t=>d.push(t),block:t=>g.push(t)}}export{r as createBrowserHistory,i as createHashHistory,o as createMemoryHistory,l as createPath,a as parsePath};
//# sourceMappingURL=history.production.min.js.map
