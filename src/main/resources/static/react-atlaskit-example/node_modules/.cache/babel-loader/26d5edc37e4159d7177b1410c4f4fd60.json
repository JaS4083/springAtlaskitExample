{"ast":null,"code":"import { __extends } from \"tslib\";\nimport GlobalTheme from '@atlaskit/theme/components';\nimport React, { PureComponent } from 'react';\nimport { Slot, ShapeGroup, Svg } from '../styled/AvatarImage';\nexport function DefaultImage(_a) {\n  var appearance = _a.appearance,\n      size = _a.size,\n      title = _a.title,\n      isLoading = _a.isLoading;\n  var rectBounds = 128;\n  return React.createElement(GlobalTheme.Consumer, null, function (_a) {\n    var mode = _a.mode;\n    return React.createElement(Svg, {\n      appearance: appearance,\n      isLoading: isLoading,\n      size: size,\n      viewBox: \"0 0 \" + rectBounds + \" \" + rectBounds,\n      version: \"1.1\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      role: \"img\",\n      \"aria-label\": title\n    }, appearance === 'circle' ? React.createElement(ShapeGroup, {\n      mode: mode\n    }, React.createElement(\"circle\", {\n      cx: \"64\",\n      cy: \"64\",\n      r: \"64\"\n    }), React.createElement(\"g\", null, React.createElement(\"path\", {\n      d: \"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z\"\n    }), React.createElement(\"path\", {\n      d: \"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24\"\n    }))) : React.createElement(ShapeGroup, {\n      mode: mode\n    }, React.createElement(\"rect\", {\n      x: \"0\",\n      y: \"0\",\n      width: rectBounds,\n      height: rectBounds\n    }), React.createElement(\"g\", {\n      transform: \"translate(19.000000, 32.000000)\"\n    }, React.createElement(\"path\", {\n      d: \"M18.25,32.5 L54.5833333,32.5 L54.5833333,23.4166667 L18.25,23.4166667 L18.25,32.5 Z M9.16666667,18.8331166 C9.16666667,16.3479549 11.236581,14.3333333 13.7195662,14.3333333 L59.1137671,14.3333333 C61.6282641,14.3333333 63.6666667,16.3815123 63.6666667,18.8331166 L63.6666667,41.5833333 L9.16666667,41.5833333 L9.16666667,18.8331166 Z\"\n    }), React.createElement(\"path\", {\n      d: \"M18.25,9.81383682 C18.25,4.7850061 22.3296003,0.708333333 27.3238554,0.708333333 L36.4261446,0.708333333 C41.4374965,0.708333333 45.5,4.76812825 45.5,9.81383682 L45.5,23.4166667 L18.25,23.4166667 L18.25,9.81383682 Z M36.4166667,9.81383682 C36.4166667,9.79803315 36.4184748,9.79303784 36.4207515,9.79166667 L27.3238554,9.79166667 C27.3447224,9.79166667 27.3333333,9.80308059 27.3333333,9.81383682 L27.3333333,14.3333333 L36.4166667,14.3333333 L36.4166667,9.81383682 Z\"\n    }), React.createElement(\"path\", {\n      d: \"M11.4386532,55.2083333 L74.9953562,55.2083333 L79.5452242,41.5833333 L9.80449752,41.5833333 L11.4386532,55.2083333 Z M0.1048547,36.987541 C-0.192399775,34.5091405 1.5865717,32.5 4.09502839,32.5 L87.6264735,32.5 C90.1274401,32.5 91.5225656,34.393506 90.7231047,36.7875656 L82.9702846,60.004101 C82.1795402,62.3720582 79.5279445,64.2916667 76.9985338,64.2916667 L7.91963924,64.2916667 C5.41227673,64.2916667 3.14113571,62.3029555 2.84143097,59.8041257 L0.1048547,36.987541 Z\"\n    }))));\n  });\n}\n\nvar AvatarImage =\n/** @class */\nfunction (_super) {\n  __extends(AvatarImage, _super);\n\n  function AvatarImage() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hasError: false,\n      isLoading: false\n    };\n\n    _this.handleLoadSuccess = function () {\n      _this.setState({\n        hasError: false,\n        isLoading: false\n      });\n    };\n\n    _this.handleLoadError = function () {\n      _this.setState({\n        hasError: true,\n        isLoading: false\n      });\n    };\n\n    return _this;\n  }\n\n  AvatarImage.prototype.componentDidMount = function () {\n    if (this.props.src) {\n      // check whether there was a problem loading the image\n      // if handleLoadError is called we show the default avatar\n      var img = new Image();\n      img.onerror = this.handleLoadError;\n      img.src = this.props.src || '';\n    }\n  };\n\n  AvatarImage.prototype.componentDidUpdate = function (prevProps) {\n    var _this = this;\n\n    if (this.props.src && this.props.src !== prevProps.src) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({\n        isLoading: true\n      }, function () {\n        var img = new Image();\n        img.onload = _this.handleLoadSuccess;\n        img.onerror = _this.handleLoadError;\n        img.src = _this.props.src || '';\n      });\n    }\n  };\n\n  AvatarImage.prototype.render = function () {\n    var _a = this.props,\n        alt = _a.alt,\n        src = _a.src,\n        appearance = _a.appearance,\n        size = _a.size;\n    var _b = this.state,\n        hasError = _b.hasError,\n        isLoading = _b.isLoading;\n    var showDefault = !isLoading && (!src || hasError);\n    var imageUrl = src && !isLoading ? src : undefined;\n    return showDefault ? React.createElement(DefaultImage, {\n      appearance: appearance,\n      size: size,\n      title: alt,\n      isLoading: isLoading\n    }) : React.createElement(Slot, {\n      appearance: appearance,\n      isLoading: isLoading,\n      size: size,\n      role: \"img\",\n      label: alt,\n      backgroundImage: imageUrl\n    });\n  };\n\n  return AvatarImage;\n}(PureComponent);\n\nexport default AvatarImage;","map":{"version":3,"sources":["../../../src/components/AvatarImage.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __extends } from \"tslib\";\nimport GlobalTheme from '@atlaskit/theme/components';\nimport React, { PureComponent } from 'react';\nimport { Slot, ShapeGroup, Svg } from '../styled/AvatarImage';\nexport function DefaultImage(_a) {\n    var appearance = _a.appearance, size = _a.size, title = _a.title, isLoading = _a.isLoading;\n    var rectBounds = 128;\n    return (React.createElement(GlobalTheme.Consumer, null, function (_a) {\n        var mode = _a.mode;\n        return (React.createElement(Svg, { appearance: appearance, isLoading: isLoading, size: size, viewBox: \"0 0 \" + rectBounds + \" \" + rectBounds, version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", role: \"img\", \"aria-label\": title }, appearance === 'circle' ? (React.createElement(ShapeGroup, { mode: mode },\n            React.createElement(\"circle\", { cx: \"64\", cy: \"64\", r: \"64\" }),\n            React.createElement(\"g\", null,\n                React.createElement(\"path\", { d: \"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z\" }),\n                React.createElement(\"path\", { d: \"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24\" })))) : (React.createElement(ShapeGroup, { mode: mode },\n            React.createElement(\"rect\", { x: \"0\", y: \"0\", width: rectBounds, height: rectBounds }),\n            React.createElement(\"g\", { transform: \"translate(19.000000, 32.000000)\" },\n                React.createElement(\"path\", { d: \"M18.25,32.5 L54.5833333,32.5 L54.5833333,23.4166667 L18.25,23.4166667 L18.25,32.5 Z M9.16666667,18.8331166 C9.16666667,16.3479549 11.236581,14.3333333 13.7195662,14.3333333 L59.1137671,14.3333333 C61.6282641,14.3333333 63.6666667,16.3815123 63.6666667,18.8331166 L63.6666667,41.5833333 L9.16666667,41.5833333 L9.16666667,18.8331166 Z\" }),\n                React.createElement(\"path\", { d: \"M18.25,9.81383682 C18.25,4.7850061 22.3296003,0.708333333 27.3238554,0.708333333 L36.4261446,0.708333333 C41.4374965,0.708333333 45.5,4.76812825 45.5,9.81383682 L45.5,23.4166667 L18.25,23.4166667 L18.25,9.81383682 Z M36.4166667,9.81383682 C36.4166667,9.79803315 36.4184748,9.79303784 36.4207515,9.79166667 L27.3238554,9.79166667 C27.3447224,9.79166667 27.3333333,9.80308059 27.3333333,9.81383682 L27.3333333,14.3333333 L36.4166667,14.3333333 L36.4166667,9.81383682 Z\" }),\n                React.createElement(\"path\", { d: \"M11.4386532,55.2083333 L74.9953562,55.2083333 L79.5452242,41.5833333 L9.80449752,41.5833333 L11.4386532,55.2083333 Z M0.1048547,36.987541 C-0.192399775,34.5091405 1.5865717,32.5 4.09502839,32.5 L87.6264735,32.5 C90.1274401,32.5 91.5225656,34.393506 90.7231047,36.7875656 L82.9702846,60.004101 C82.1795402,62.3720582 79.5279445,64.2916667 76.9985338,64.2916667 L7.91963924,64.2916667 C5.41227673,64.2916667 3.14113571,62.3029555 2.84143097,59.8041257 L0.1048547,36.987541 Z\" }))))));\n    }));\n}\nvar AvatarImage = /** @class */ (function (_super) {\n    __extends(AvatarImage, _super);\n    function AvatarImage() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            hasError: false,\n            isLoading: false,\n        };\n        _this.handleLoadSuccess = function () {\n            _this.setState({ hasError: false, isLoading: false });\n        };\n        _this.handleLoadError = function () {\n            _this.setState({ hasError: true, isLoading: false });\n        };\n        return _this;\n    }\n    AvatarImage.prototype.componentDidMount = function () {\n        if (this.props.src) {\n            // check whether there was a problem loading the image\n            // if handleLoadError is called we show the default avatar\n            var img = new Image();\n            img.onerror = this.handleLoadError;\n            img.src = this.props.src || '';\n        }\n    };\n    AvatarImage.prototype.componentDidUpdate = function (prevProps) {\n        var _this = this;\n        if (this.props.src && this.props.src !== prevProps.src) {\n            // eslint-disable-next-line react/no-did-update-set-state\n            this.setState({ isLoading: true }, function () {\n                var img = new Image();\n                img.onload = _this.handleLoadSuccess;\n                img.onerror = _this.handleLoadError;\n                img.src = _this.props.src || '';\n            });\n        }\n    };\n    AvatarImage.prototype.render = function () {\n        var _a = this.props, alt = _a.alt, src = _a.src, appearance = _a.appearance, size = _a.size;\n        var _b = this.state, hasError = _b.hasError, isLoading = _b.isLoading;\n        var showDefault = !isLoading && (!src || hasError);\n        var imageUrl = src && !isLoading ? src : undefined;\n        return showDefault ? (React.createElement(DefaultImage, { appearance: appearance, size: size, title: alt, isLoading: isLoading })) : (React.createElement(Slot, { appearance: appearance, isLoading: isLoading, size: size, role: \"img\", label: alt, backgroundImage: imageUrl }));\n    };\n    return AvatarImage;\n}(PureComponent));\nexport default AvatarImage;\n//# sourceMappingURL=AvatarImage.js.map"]},"metadata":{},"sourceType":"module"}