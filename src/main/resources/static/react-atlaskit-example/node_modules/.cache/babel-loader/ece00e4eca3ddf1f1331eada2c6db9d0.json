{"ast":null,"code":"import { __extends } from \"tslib\";\nimport React from 'react';\nimport { canUseDOM } from 'exenv';\nimport { withAnalyticsEvents, withAnalyticsContext, createAndFireEvent } from '@atlaskit/analytics-next';\nimport Blanket from '@atlaskit/blanket';\nimport { name as packageName, version as packageVersion } from '../version.json';\nimport { WIDTH_ENUM } from '../shared-variables';\nimport { Dialog, FillScreen as StyledFillScreen } from '../styled/Modal';\nimport { Animation } from './Animation';\nimport Content from './Content';\nimport FocusLock from './FocusLock';\nimport Positioner from './Positioner';\n\nfunction getScrollDistance() {\n  return window.pageYOffset || document.documentElement && document.documentElement.scrollTop || document.body && document.body.scrollTop || 0;\n}\n\nvar Modal =\n/** @class */\nfunction (_super) {\n  __extends(Modal, _super);\n\n  function Modal() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      dialogNode: null,\n      scrollDistance: canUseDOM ? getScrollDistance() : 0,\n      isExiting: false\n    };\n    /* Prevent window from being scrolled programatically so that the modal is positioned correctly\n     * and to prevent scrollIntoView from scrolling the window.\n     */\n\n    _this.handleWindowScroll = function () {\n      if (getScrollDistance() !== _this.state.scrollDistance) {\n        window.scrollTo(window.pageXOffset, _this.state.scrollDistance);\n      }\n    };\n\n    _this.handleOverlayClick = function (e) {\n      if (_this.props.shouldCloseOnOverlayClick) {\n        _this.props.onClose(e);\n      }\n    };\n\n    return _this;\n  }\n\n  Modal.prototype.componentDidMount = function () {\n    var scrollDistance = getScrollDistance();\n\n    if (getScrollDistance() !== this.state.scrollDistance) {\n      // eslint-disable-next-line react/no-did-mount-set-state\n      this.setState({\n        scrollDistance: scrollDistance\n      });\n    }\n\n    window.addEventListener('scroll', this.handleWindowScroll);\n  };\n\n  Modal.prototype.componentWillUnmount = function () {\n    window.removeEventListener('scroll', this.handleWindowScroll);\n  };\n\n  Modal.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        actions = _a.actions,\n        appearance = _a.appearance,\n        autoFocus = _a.autoFocus,\n        body = _a.body,\n        children = _a.children,\n        components = _a.components,\n        footer = _a.footer,\n        header = _a.header,\n        height = _a.height,\n        isChromeless = _a.isChromeless,\n        isHeadingMultiline = _a.isHeadingMultiline,\n        isOpen = _a.isOpen,\n        onClose = _a.onClose,\n        onCloseComplete = _a.onCloseComplete,\n        onOpenComplete = _a.onOpenComplete,\n        onStackChange = _a.onStackChange,\n        shouldCloseOnEscapePress = _a.shouldCloseOnEscapePress,\n        stackIndex = _a.stackIndex,\n        heading = _a.heading,\n        width = _a.width,\n        scrollBehavior = _a.scrollBehavior,\n        testId = _a.testId;\n    var scrollDistance = this.state.scrollDistance;\n    var isBackground = stackIndex != null && stackIndex > 0; // If a custom width (number or percentage) is supplied, set inline style\n    // otherwise allow styled component to consume as named prop\n\n    var widthName = width ? WIDTH_ENUM.values.indexOf(width.toString()) !== -1 ? width : undefined : undefined;\n    var widthValue = widthName ? undefined : width;\n    return React.createElement(Animation, {\n      in: isOpen,\n      onExited: onCloseComplete,\n      onEntered: onOpenComplete,\n      stackIndex: stackIndex\n    }, function (_a) {\n      var fade = _a.fade,\n          slide = _a.slide;\n      return React.createElement(StyledFillScreen, {\n        style: fade,\n        \"aria-hidden\": isBackground,\n        scrollDistance: scrollDistance\n      }, React.createElement(FocusLock, {\n        isEnabled: stackIndex === 0 && isOpen,\n        autoFocus: autoFocus\n      }, React.createElement(Blanket, {\n        isTinted: true,\n        onBlanketClicked: _this.handleOverlayClick\n      }), React.createElement(Positioner, {\n        style: slide,\n        scrollBehavior: scrollBehavior,\n        widthName: widthName,\n        widthValue: widthValue\n      }, React.createElement(Dialog, {\n        heightValue: height,\n        isChromeless: isChromeless,\n        role: \"dialog\",\n        \"data-testid\": testId,\n        tabIndex: -1\n      }, React.createElement(Content, {\n        actions: actions,\n        appearance: appearance,\n        components: components,\n        footer: footer,\n        heading: heading,\n        isHeadingMultiline: isHeadingMultiline,\n        header: header,\n        onClose: onClose,\n        shouldScroll: scrollBehavior === 'inside',\n        shouldCloseOnEscapePress: shouldCloseOnEscapePress,\n        onStackChange: onStackChange,\n        isChromeless: isChromeless,\n        stackIndex: stackIndex,\n        body: body\n      }, children)))));\n    });\n  };\n\n  Modal.defaultProps = {\n    autoFocus: true,\n    scrollBehavior: 'inside',\n    shouldCloseOnEscapePress: true,\n    shouldCloseOnOverlayClick: true,\n    isChromeless: false,\n    isOpen: true,\n    stackIndex: 0,\n    width: 'medium',\n    isHeadingMultiline: true,\n    onClose: function () {}\n  };\n  return Modal;\n}(React.Component);\n\nvar createAndFireEventOnAtlaskit = createAndFireEvent('atlaskit');\nexport var ModalDialogWithoutAnalytics = Modal;\nexport default withAnalyticsContext({\n  componentName: 'modalDialog',\n  packageName: packageName,\n  packageVersion: packageVersion\n})(withAnalyticsEvents({\n  onClose: createAndFireEventOnAtlaskit({\n    action: 'closed',\n    actionSubject: 'modalDialog',\n    attributes: {\n      componentName: 'modalDialog',\n      packageName: packageName,\n      packageVersion: packageVersion\n    }\n  })\n})(Modal));","map":{"version":3,"sources":["../../../src/components/Modal.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __extends } from \"tslib\";\nimport React from 'react';\nimport { canUseDOM } from 'exenv';\nimport { withAnalyticsEvents, withAnalyticsContext, createAndFireEvent, } from '@atlaskit/analytics-next';\nimport Blanket from '@atlaskit/blanket';\nimport { name as packageName, version as packageVersion, } from '../version.json';\nimport { WIDTH_ENUM } from '../shared-variables';\nimport { Dialog, FillScreen as StyledFillScreen } from '../styled/Modal';\nimport { Animation } from './Animation';\nimport Content from './Content';\nimport FocusLock from './FocusLock';\nimport Positioner from './Positioner';\nfunction getScrollDistance() {\n    return (window.pageYOffset ||\n        (document.documentElement && document.documentElement.scrollTop) ||\n        (document.body && document.body.scrollTop) ||\n        0);\n}\nvar Modal = /** @class */ (function (_super) {\n    __extends(Modal, _super);\n    function Modal() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            dialogNode: null,\n            scrollDistance: canUseDOM ? getScrollDistance() : 0,\n            isExiting: false,\n        };\n        /* Prevent window from being scrolled programatically so that the modal is positioned correctly\n         * and to prevent scrollIntoView from scrolling the window.\n         */\n        _this.handleWindowScroll = function () {\n            if (getScrollDistance() !== _this.state.scrollDistance) {\n                window.scrollTo(window.pageXOffset, _this.state.scrollDistance);\n            }\n        };\n        _this.handleOverlayClick = function (e) {\n            if (_this.props.shouldCloseOnOverlayClick) {\n                _this.props.onClose(e);\n            }\n        };\n        return _this;\n    }\n    Modal.prototype.componentDidMount = function () {\n        var scrollDistance = getScrollDistance();\n        if (getScrollDistance() !== this.state.scrollDistance) {\n            // eslint-disable-next-line react/no-did-mount-set-state\n            this.setState({ scrollDistance: scrollDistance });\n        }\n        window.addEventListener('scroll', this.handleWindowScroll);\n    };\n    Modal.prototype.componentWillUnmount = function () {\n        window.removeEventListener('scroll', this.handleWindowScroll);\n    };\n    Modal.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, actions = _a.actions, appearance = _a.appearance, autoFocus = _a.autoFocus, body = _a.body, children = _a.children, components = _a.components, footer = _a.footer, header = _a.header, height = _a.height, isChromeless = _a.isChromeless, isHeadingMultiline = _a.isHeadingMultiline, isOpen = _a.isOpen, onClose = _a.onClose, onCloseComplete = _a.onCloseComplete, onOpenComplete = _a.onOpenComplete, onStackChange = _a.onStackChange, shouldCloseOnEscapePress = _a.shouldCloseOnEscapePress, stackIndex = _a.stackIndex, heading = _a.heading, width = _a.width, scrollBehavior = _a.scrollBehavior, testId = _a.testId;\n        var scrollDistance = this.state.scrollDistance;\n        var isBackground = stackIndex != null && stackIndex > 0;\n        // If a custom width (number or percentage) is supplied, set inline style\n        // otherwise allow styled component to consume as named prop\n        var widthName = width\n            ? WIDTH_ENUM.values.indexOf(width.toString()) !== -1\n                ? width\n                : undefined\n            : undefined;\n        var widthValue = widthName ? undefined : width;\n        return (React.createElement(Animation, { in: isOpen, onExited: onCloseComplete, onEntered: onOpenComplete, stackIndex: stackIndex }, function (_a) {\n            var fade = _a.fade, slide = _a.slide;\n            return (React.createElement(StyledFillScreen, { style: fade, \"aria-hidden\": isBackground, scrollDistance: scrollDistance },\n                React.createElement(FocusLock, { isEnabled: stackIndex === 0 && isOpen, autoFocus: autoFocus },\n                    React.createElement(Blanket, { isTinted: true, onBlanketClicked: _this.handleOverlayClick }),\n                    React.createElement(Positioner, { style: slide, scrollBehavior: scrollBehavior, widthName: widthName, widthValue: widthValue },\n                        React.createElement(Dialog, { heightValue: height, isChromeless: isChromeless, role: \"dialog\", \"data-testid\": testId, tabIndex: -1 },\n                            React.createElement(Content, { actions: actions, appearance: appearance, components: components, footer: footer, heading: heading, isHeadingMultiline: isHeadingMultiline, header: header, onClose: onClose, shouldScroll: scrollBehavior === 'inside', shouldCloseOnEscapePress: shouldCloseOnEscapePress, onStackChange: onStackChange, isChromeless: isChromeless, stackIndex: stackIndex, body: body }, children))))));\n        }));\n    };\n    Modal.defaultProps = {\n        autoFocus: true,\n        scrollBehavior: 'inside',\n        shouldCloseOnEscapePress: true,\n        shouldCloseOnOverlayClick: true,\n        isChromeless: false,\n        isOpen: true,\n        stackIndex: 0,\n        width: 'medium',\n        isHeadingMultiline: true,\n        onClose: function () { },\n    };\n    return Modal;\n}(React.Component));\nvar createAndFireEventOnAtlaskit = createAndFireEvent('atlaskit');\nexport var ModalDialogWithoutAnalytics = Modal;\nexport default withAnalyticsContext({\n    componentName: 'modalDialog',\n    packageName: packageName,\n    packageVersion: packageVersion,\n})(withAnalyticsEvents({\n    onClose: createAndFireEventOnAtlaskit({\n        action: 'closed',\n        actionSubject: 'modalDialog',\n        attributes: {\n            componentName: 'modalDialog',\n            packageName: packageName,\n            packageVersion: packageVersion,\n        },\n    }),\n})(Modal));\n//# sourceMappingURL=Modal.js.map"]},"metadata":{},"sourceType":"module"}